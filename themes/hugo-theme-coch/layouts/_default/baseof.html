<!DOCTYPE html>
{{ "<!--[if lt IE 7]>" | safeHTML }}<html lang="fr" class="no-js lt-ie9 lt-ie8 lt-ie7"> {{ "<![endif]-->" | safeHTML }}
{{ "<!--[if IE 7]>" | safeHTML }}<html lang="fr" class="no-js lt-ie9 lt-ie8"> {{ "<![endif]-->" | safeHTML }}
{{ "<!--[if IE 8]>" | safeHTML }}<html lang="fr" class="no-js lt-ie9"> {{ "<![endif]-->" | safeHTML }}
{{ "<!--[if gt IE 8]><!-->" | safeHTML }}<html class="no-js" lang="fr"> {{ "<!--<![endif]-->" | safeHTML }}
  {{ partial "head.html" . }}
  <body>
    {{- partial "header.html" . -}}
    
    {{- partial "navbar.html" . -}}

    {{- block "main" . }}
    <main class="container container-main" role="main">

      {{ block "header-page" . }}
      {{- partial "header-page.html" . -}}
      {{ end }}

      <article class="container article-container">

        {{ block "article" . }}
        {{ with .Params.description }}
        <p class="article-lead">
          {{ . }}
        </p>
        {{ end }}

        {{ .Content }}
        {{ end }}
      </article>
    </main>
    {{- end }}

    {{- partial "footer.html" . -}}

    {{- partial "aside.html" . -}}
    <script>
      (function(head) {
        head.load([
          {{ $vendorJS := resources.Get "scripts/vendor.js" }}
          "{{ $vendorJS.Permalink }}",
          {{ $mainJS := resources.Get "scripts/main.js" }}
          "{{ $mainJS.Permalink }}"
          {{ range .Params.scripts }}
          ,"{{ . }}"
          {{- end -}}
        ], function() {
          console.log("loaded scripts");
        });
        head.load([
          {{ $string := (printf "var rootURL: '%s'; var apiURL: '%s';" (absURL "/") (.Param "API_URL")) }}
          {{- $targetPath := "styles/fonts.scss" -}}
          {{- $fontsSASS := resources.Get $targetPath | resources.ToCSS | resources.PostCSS | resources.Minify -}}
          {{- $fontsCSS := $fontsSASS.Permalink -}}
          "{{ replace $fontsCSS "http://localhost:1313" "" }}"
          {{ range .Params.styles }}
          ,"{{ . }}"
          {{- end -}}
        ], function() {
          console.log("loaded stylesheets");
        });
      })(head);
    </script>
    </body>
</html>
